FROM node:16

WORKDIR /usr/src/app
COPY package*.json ./
RUN npm install
COPY . ./

EXPOSE 8000

ENV ENV=${ENV}
ENV DB_CLOUD_URI=${DB_CLOUD_URI}
ENV JWT_SECRET=${JWT_SECRET}
ENV FROM_NAME=${FROM_NAME}
ENV FROM_EMAIL=${FROM_EMAIL}
ENV FROM_EMAIL_PW=${FROM_EMAIL_PW}
RUN npm test
CMD [ "npm", "start" ]
